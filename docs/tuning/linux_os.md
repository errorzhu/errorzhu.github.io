# linux 创建线程的方式
1. fork()系统调用
fork()系统调用创建一个新的进程，新进程是父进程的副本，包括代码段、数据段、堆栈等资源，并且在新进程中返回0，在父进程中返回新进程的PID。因此，使用fork()可以创建一个新的线程。

优点：

fork()是一个可移植的线程创建方式，可以运行于所有支持的操作系统上。
新进程与父进程之间相互独立，互不影响。
缺点：

fork()创建进程的开销较大，需要复制父进程的所有资源，包括代码段、数据段、堆栈等。
父进程和子进程之间的通信需要使用IPC（Inter-Process Communication）机制，例如管道、共享内存、信号量、消息队列等。

2. pthread_create()函数
pthread_create()函数是POSIX线程库提供的一个API，用于创建一个新的线程。使用该函数需要包含<pthread.h>头文件。

优点：

pthread_create()创建线程的开销较小，只需要复制一些必要的线程上下文信息。
可以使用线程之间的共享内存机制来进行线程之间的通信。
缺点：

pthread_create()只能在支持POSIX线程库的操作系统上使用。
需要额外的代码来处理线程之间的同步和互斥问题。
3. clone()系统调用
clone()系统调用可以创建一个新的进程或线程。使用该系统调用可以指定新进程或线程与父进程或线程共享某些资源。

优点：

可以指定新进程或线程与父进程或线程共享某些资源，例如内存空间、文件描述符等。
可以在新进程或线程中指定一个函数作为入口点。
缺点：

clone()系统调用的参数比较复杂，需要仔细配置。
clone()系统调用不是标准的POSIX接口，只能在Linux等少数操作系统上使用。
4. vfork()系统调用
vfork()系统调用创建一个新进程，但该进程与父进程共享内存空间。在新进程中执行exec()系列函数或者调用_exit()函数后，父进程才会继续执行。需要注意的是，由于其设计存在缺陷，在Linux 2.6.23之后的版本已经不再建议使用。

优点：

vfork()创建进程的开销较小，不需要复制任何资源。
可以在新进程中执行exec()系列函数或者调用_exit()函数后，父进程才会继续执行。
缺点：

vfork()存在一些限制和风险，例如新进程不能修改父进程的内存空间，否则会导致未定义的行为。
vfork()已经不再建议使用，可能存在一些安全问题和兼容性问题。

# 运行进程绑定核心
```
taskset [options] affinity command [arguments...]
taskset -c 0,1 -p 1234
```
